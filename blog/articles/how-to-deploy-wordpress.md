##  دیپلوی کردن وردپرس با فندق
وردپرس یک سیستم مدیریت محتوای بسیار پرطرفدار است که می‌توانید به سادگی روی پلتفرم فندق دیپلوی و استفاده کنید. در این مطلب قصد داریم با هم مراحل دیپلوی کردن وردپرس روی فندق را مرور کنیم.

### خلاصه مراحل
1.  یک اکانت فندق می‌سازید و فندق cli ‌رو نصب کنید
2. یک سرویس MySQL ‌از طریق دستور managed-service ‌ایجاد می‌کنید.
3. یک داکر فایل برای وردپرس می‌نویسید و روی فندق پابلیش می‌کنید.
4. با ست کردن صحیح environment variables وردپرس رو دیپلوی می‌کنید.

### قدم اول: ساخت اکانت فندق و نصب CLI
کافیه یک سر به آدرس [فندق](http://fandogh.cloud/) بزنید و روی دکمه ثبت‌نام کلیک کنید، فکر نمی‌کنم بیشتر از ۱ دقیقه طول بکشه.
شما برای ارسال کامندهاتون به فندق به کلاینت فندق یا همون [Fandogh CLI](https://github.com/fandoghpaas/fandogh-cli) هم نیاز دارید که از طریق همین لینک می‌تونید به راحتی نصبش کنید.

### قدم دوم: ساخت سرویس MySQL
ما توی فندق یک قابلیتی ارائه میدیم به نام managed-service  که کمک می‌کنه سرویس‌های رایج رو ساده‌تر دیپلوی کنید.
مراحل کار به این شکل هستش:
قبل از هر چیز لازمه که لاگین کنیم
```
fandogh login
```
دیپلوی کردن یک سرویس managed  فقط یک کامند لازم داره به شرطی که اسم و ورژن سرویسی که میخواید دیپلوی کنید رو بدونید، مثلا برای دیپلوی MySQL ورژن 9.4 دستور زیر کفایت می‌کنه:
```
fandogh managed-service deploy mysql 9.4
```
وقتی دستور رو اجرا می‌کنید باید چنین خروجی مشاهده کنید:

```
Your Mysql service will be ready in a few seconds.
You can have access to the PHPMyAdmin via following link:
http://mysql.[YOURNAMESPACE].fandogh.cloud

```
اگر پیغام بالا رو مشاهده کردید یعنی سرویس MySQLاتون با موفقیت راه‌اندازی شده




### قدم سوم: نوشتن Dockerfile و پابلیش کردن وردپرس

برای اینکار یک دایرکتوری بسازید روی سیستم خودتون، مثلا اسمش رو می‌‌گذاریم my-wp-blog  و وارد اون دایرکتوری بشید.
یک فایل به نام `Dockerfile` بسازید و تنها چیزی که لازمه داخلش بنویسید همینه:
```
FROM wordpress

```
با اینکار ما یک Image کاملا مشابه با Image اصلی وردپرس ساختیم و از همون استفاده می‌کنیم، توضیحات مربوط به image اصلی وردپرس رو می‌تونید [اینجا](https://hub.docker.com/_/wordpress/) مشاهده کنید
حالا در حالی که داخل اون دایرکتوری هستید باید فقط یک فایل داشته باشید به نام Dockerfile  با محتویاتی که بالاتر اشاره کردم، الان کافیه که اول imageاتون رو روی فندق init کنید و بعد هم ورژن بزنید و پابلیش کنید:
```
fandogh image init
```
که از شما یک اسم می‌خواد، و
```
fandogh image publish
```
که از شما ورژن می‌خواد
اگر همه چیز خوب پیش بره باید وقتی لیست ورژن‌ها رو میگیرید این ورژن باید وضعیتش `BUILT` باشه:
```
fandogh image versions
```

### قدم چهارم و آخر: دیپلوی کردن وردپرس روی فندق

این آخرین قدم هستش و تنهای یک دستور فاصله دارید تا بلاگتون دیپلوی بشه :
```
fandogh service deploy
```
بعد از اجرا از شما در مورد اینکه کدوم ورژن رو مایلی دیپلوی کنید می‌پرسه و اینکه اسم سرویستون چیه و اگر همه چیز خوب پیش بره خروجی مورد نظر این باید باشه:

```
The image version: v1
Your service name: mywp
Your service deployed successfully.
The service is accessible via following link:
http://mywp.[YOUR-NAMESPACE].fandogh.cloud

```
اگر به آدرس بالا مراجعه کنید با صفحه نصب wordpress مواجه میشید، توی صفحه مربوط به تنظیمات دیتابیس شما نیاز دارید که اطلاعات ارتباط با MySQL رو در اختیار وردپرس قرار بدید.
از طریق PhpMyADMIN  می‌تونید به سادگی یوزر و دیتابیس بسازید اما نکته خیلی مهم این هستش که روی چه آدرسی سرویس وردپرس شما باید دنبال MySQL بگرده؟
اگر مستندات فندق رو مطالعه کرده باشید می‌دونید که به ازای هر کاربر یک namespace وجود داره که تمام سرویس‌های شما(مثلا همین mysql و wordpress) داخل اون namespace  توی یک Networkای قرار دارند. یکی از امکانات مهم هر namespace وجود یک DNS داخلی هستش که به شما این امکان رو میده از توی یک سرویس به بقیه سرویس‌هاتون دسترسی داشته باشید.
برای دسترسی به یک سرویس کافیه اسمش رو به DNS بدید تا آدرس IP اش رو در اختیارتون قرار بده.
توی نصب وردپرس هم به جای Host کافیه بنویسید mysql که در واقع اسم سرویس MySQL‌ای هستش که قبلا نصب کردیم

بعد از این مرحله باید بتو‌نید از وردپرستون استفاده کنید.
