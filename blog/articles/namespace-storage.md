# Namespace و Storage Model

در این بخش سعی میکنیم برخی قسمت ها مثل Namespace و Storage Model رو برای شما توضیح بدهیم تا با ساختار و  نحوه پیاده سازی 
این مفاهیم بر روی فندق آشنا شوید.

## Namespace

Namespace یک فضای اختصاص داده شده به سرویسهای شماست، سرویس‌های یک namespace از طریق شبکه داخلی قادر به دسترسی به یک‌دیگر هستند 
و فضای ذخیره‌سازی اشتراکی (Shared-Storage) دارند.
در حال حاضر برای هر کاربر پس از عضویت به طور خودکار یک Namespace ایجاد می‌شود.

## Network

هر Namespace در میزبان تعدادی سرویس می باشد که کاربر آن ها را ساخته است و هر سرویس دارای یک آدرس `IP` و یک `service_name` می باشد.
برای درک هرچه بهتر موضوع به تصویر زیر توجه کنید.

!(/articles/service_relation.png "Fandogh Network")

همانگونه که مشاهده می کنید در فضای اختصاصی (Namespace) تعداد 4 سرویس ساخته شده است و فندق به هر سرویس ایجاد شده یک IP اختصاصی می دهد و همینطور هر سرویس دارای مشخصه دیگری به نام `service_name` می باشد.
مشخصه اصلی برای آنکه سرویس ها همدیگر را پیدا کنند و با هم تعامل داشته باشند بر `service_name` می باشد.زیرا که اگر تحت هر شرایطی یکی از سرویس ها Destroy  شود و دوباره ساخته شود، IP جدیدی به آن تخصیص داده می شود.

برای مثال اگر فرض کنیم سرویس FS1 با FS2 در تماس بوده ولی بعد از 1 ساعت سرویس FS2 از بین برود، سرویس FS1 دیگر دسترسی به FS2  نداشته و از طرفی هم نمی داند که IP مربوط به FS2 چند بود ولی
نام سرویس را می داند و اگر دوباره بخواهد با آن کار کند، نام سرویس را به DNS  میفرستد تا IP آن سرویس را بگیرد.

## DNS

همانطور که میدانیم هر وبسایت در فضای اینترنت دارای یک IP می باشد که این IP شناسه آن سایت می باشد، اما از آن جایی که بخاطر سپردن این IP Addressها دشوار می باشد، برای همین از سیستمی به نام DNS یا Domain Name System 
استفاده میکنیم، بدین صورت که به هر IP یک اسم دامنه نصبت میدهیم مانند `Fandogh.cloud`.

حال با توجه به بخش قبل، سرویس ها `service_name` را به DNS می دهند تا IP سرویس مورد نظر را به دست آورده و به آن متصل شوند.

!(/articles/dns_namespace.png "Fandogh DNS")


## Storage

همانطور که انتظار می رود هر سرویس باید بتواند در فضایی اطلاعات خود را بنویسد و بخواند، به همین جهت هر Namepace به همراه یک فضای ذخیره و بازیابی اطلاعاتی به نام `shared-storage` ساخته می شود.
همه سرویس ها به این فضای اطلاعاتی دسترسی دارند و می توانند عملیات Read و Write  بر روی آن انجام دهند.

!(/articles/shared_storage.png "Fandogh shared-storage")

`<b>توجه داشته باشید هر Container دارای یک فضای Storage داخلی می باشد اما استفاده از آن توصیه نمیشود زیرا که این فضا مانا نیست و هر بار که Container از بین برود، اطلاعات شما هم به همراه آن Container از بین می رود.</b>`
 